

<div class="app-container">

  <div class="app-content">
    <div class="app-sidebar">

      <a *ngIf="authService.isAdmin()" class="app-sidebar-link" title="Grafico" routerLink="manager">
        <svg class="link-icon"  xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="feather feather-pie-chart" viewBox="0 0 24 24">
          <defs />
          <path d="M21.21 15.89A10 10 0 118 2.83M22 12A10 10 0 0012 2v10z" />
        </svg>
      </a>
      <span routerLink="tasks"><a class="app-sidebar-link"  title="Monitoreo tareas" routerLink="manager">
        <svg   xmlns="http://www.w3.org/2000/svg"  width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
          <line x1="16" y1="2" x2="16" y2="6" />
          <line x1="8" y1="2" x2="8" y2="6" />
          <line x1="3" y1="10" x2="21" y2="10" />
        </svg>
      </a></span>
      <a class="app-sidebar-link">
        <svg class="link-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="feather feather-settings" viewBox="0 0 24 24">
          <defs />
          <circle cx="12" cy="12" r="3" />
          <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z" />
        </svg>
      </a>
      
    </div>
    <div class="projects-section">
      <div class="projects-section-header">
        <p>Flujos</p>
        <p class="time">{{datetoday}}</p>
      </div>
      <div class="projects-section-line">
        <div class="projects-status">

          <div class="item-status">
            <span class="status-number">{{flujosInstanciado.length}}</span>
            <span class="status-type">Total</span>
          </div>
        </div>

      </div>
      <div class="project-boxes jsListView"  name="asd">
        <div *ngFor="let element of flujosInstanciado" class="project-box-wrapper" id="asd">
          <div class="project-box" (click)="viewFlujo(element)">
            <div class="project-box-header" >
              <span>Fin {{element.FECHAFIN}}</span>
              <div class="project-box-footer">
                <div class="days-left elementID">
                  #{{element.ID}}
                </div>
              </div>
              <div class="more-wrapper" >
                <button class="project-btn-more">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-vertical">
                    <circle cx="12" cy="12" r="1" />
                    <circle cx="12" cy="5" r="1" />
                    <circle cx="12" cy="19" r="1" />
                  </svg>
                </button>
              </div>
            </div>
            <div class="project-box-content-header">
              <p class="box-content-header" matTooltipPosition="before" matTooltip={{element.NOMBRE}}>{{element.NOMBRE}}</p>
              <p class="box-content-subheader">{{element.DESCRIPCION}}</p>
              <p class="box-content-subheader"><span>Inicio </span>{{element.FECHAINICIO}}</p>
              
            </div>
            <div class="box-progress-wrapper">
              <p class="box-progress-percentage"> Tiempo Restante</p>
              <div class="box-progress-bar">
                <span *ngIf="semaforo(element.FECHAFIN)" class="box-progress prueba"><mat-progress-bar mode="determinate" color="warn" value={{avancePorFecha(element)}}></mat-progress-bar></span>
              </div>
              <div class="box-progress-bar">
                <span class="box-progress prueba"><mat-progress-bar mode="determinate" value={{element.AVANCETOTAL}}></mat-progress-bar></span>
              </div>
              <p class="box-progress-percentage"> Avance Tareas {{element.AVANCETOTAL}}%</p>
              
            </div>
            <div class="project-box-footer">
              <div class="days-left"[ngClass]="{'green': ColorSemaforo==2,'yellow': ColorSemaforo==1,'red': ColorSemaforo==0}">
                 {{semaforo(element.FECHAFIN, 2)}} Dias
              </div>
            </div>
          </div>
        </div>
        <div class="project-box-wrapper">
        </div>
      </div>
    </div>
    <div class="messages-section" *ngIf="notificaciones != 0">
      <button class="messages-close">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x-circle">
          <circle cx="12" cy="12" r="10" />
          <line x1="15" y1="9" x2="9" y2="15" />
          <line x1="9" y1="9" x2="15" y2="15" />
        </svg>
      </button>
      <div class="projects-section-header">
        <p>Notificaciones</p>
      </div>
      <div class="messages">
        <div class="message-box" *ngFor="let noti of notificaciones; let i = index">
          <a *ngIf="rol != 5; else templateName">
          <div class="message-content" >
            <div class="message-header">
              <div class="name">Flujo aginado ID {{noti.flujoID}} {{noti.flujoName}} </div>
              <div class="star-checkbox">
                <input type="checkbox" id="star-1">
                <label for="star-1">
                  <i class="gg-toolbox"></i>
                </label>
              </div>
            </div>
            <p class="message-line">
              Tienes {{notificaciones[i].tareas.length}} tareas pendientes, se debe aceptar la tareas asignadas para no incorrir en retrasos o realizar un reporte si se presenta algun inconveniente
            </p>
            <p class="message-line time">
              {{noti.fecha}}
            </p>
          </div>
        </a>
        <ng-template #templateName>
          <div class="message-content" >
            <div class="message-header">
              <div class="name">Tarea en el Flujo {{noti.flujoID}} rechazado</div>
              <div class="star-checkbox">
                <input type="checkbox" id="star-1">
                <label for="star-1">
                  <i class="gg-toolbox"></i>
                </label>
              </div>
            </div>
            <p class="message-line">
              <a *ngIf="notificaciones[i].tareas.length >1;else multi">
                Tienes {{notificaciones[i].tareas.length}} tareas rechazadas por este flujo, se debe verificar el estado de la tarea para su reasignacion
                
              </a>
              
              <ng-template #multi>
                Tienes {{notificaciones[i].tareas.length}} tarea rechazada por este flujo, se debe verificar el estado de la tarea para su reasignacion
                
              </ng-template>
            </p>
            <p class="message-line time">
              {{noti.fecha}}
            </p>
          </div>

      </ng-template>
        </div>
        
       
      </div>
    </div>
  </div>
</div>